<div class="container_80" id="grd_container" layout="column">
	<div class="controle_principal" layout="row" layout-align="start center">
		<div layout="row" flex="none">
			<md-button class="md-raised md-primary" aria-label="Buscar GRD" ng-click="goToGrds()">
				<md-icon class="material-icons step" aria-label="Buscar GRD">search</md-icon>
				Buscar GRD
			</md-button>
		</div>
		<div flex layout="row" layout-align="end center">
			<md-button class="md-raised md-primary" ng-disabled="true" aria-label="GRD enviada?">
				<md-icon class="material-icons step" aria-label="icon">{{grd.enviada?'check':'close'}}</md-icon>
				{{grd.enviada?'GRD Enviada':'GRD não enviada'}}
			</md-button>
			<md-button ng-disabled="grd.docs.length == 0 || grd.docs==undefined" class="md-raised md-primary" aria-label="Baixar GRD em ZIP" ng-click="onVisualizarGrdClick()">
				<md-icon class="material-icons step" aria-label="Baixar GRD em ZIP">remove_red_eye</md-icon>
				Visualizar GRD
			</md-button>
			<md-button ng-disabled="grd.docs.length == 0 || grd.docs==undefined" class="md-raised md-primary" aria-label="Baixar GRD em ZIP" ng-click="onBaixarGrdEmZipClick()">
				<md-icon class="material-icons step" aria-label="Baixar GRD em ZIP">archive</md-icon>
				Baixar GRD em ZIP
			</md-button>
			<md-fab-speed-dial md-open="false" md-direction="left" class="md-scale">
				<md-fab-trigger>
					<md-button class="md-fab md-accent" ng-disabled="grd.docs.length == 0 || grd.docs==undefined">
						<md-icon class="material-icons step" aria-label="Enviar">send</md-icon>
						<md-tooltip md-delay="0" md-direction="bottom" md-autohide="true">
							Enviar...
						</md-tooltip>
					</md-button>
				</md-fab-trigger>

				<md-fab-actions>
					<md-button class="md-fab md-mini" ng-click="openDialogDeEnviarEmail($event)">
						<md-icon class="material-icons step" aria-label="Enviar PDF por email">mail</md-icon>
						<md-tooltip md-delay="0" md-direction="bottom" md-autohide="true">
							... PDF por email
						</md-tooltip>
					</md-button>
					<md-button class="md-fab md-mini">
						<md-icon class="material-icons step" aria-label="Enviar link por email">link</md-icon>
						<md-tooltip md-delay="0" md-direction="bottom" md-autohide="true">
							... LINK por email
						</md-tooltip>
					</md-button>
					<md-button class="md-fab md-mini" ng-disabled="!grd.cliente.ftp_configurado" ng-click="confirmFtpUploadController($event)">
						<md-icon class="material-icons step" aria-label="Fazer upload para FTP">unarchive</md-icon>
						<md-tooltip md-delay="0" md-direction="bottom" md-autohide="true">
							... para FTP do cliente
						</md-tooltip>
					</md-button>
				</md-fab-actions>
			</md-fab-speed-dial>
		</div>
	</div>
	
	<md-tabs md-selected="selectedTab" md-dynamic-height md-border-bottom md-whiteframe="1dp">
		
		<md-tab label="Dados da GRD">
			<md-content class="md-padding dados">
				<form name="formDados" ng-submit="salvar()">
					<div layout="row" layout-align="space-between start">
						<md-input-container flex="25">
							<label>Cliente</label>
							<md-select ng-model="grd.cliente" ng-change="onClienteChange()" required>
							  <md-select-label>Selecione um Cliente</md-select-label>
							  <md-option ng-value="cliente" ng-repeat="cliente in clientes">{{ cliente.nome }}</md-option>
							</md-select>
						</md-input-container>
						<md-input-container flex="25">
							<label>Nome do Contato</label>
							<input type="text" disabled="disabled" ng-model="grd.cliente.contato_nome">
						</md-input-container>
						<md-input-container flex="25">
							<label>Telefone do Contato</label>
							<input type="text" disabled="disabled" ng-model="grd.cliente.contato_telefone">
						</md-input-container flex="25">
						<md-input-container>
							<label>Email do Contato</label>
							<input type="text" disabled="disabled" ng-model="grd.cliente.contato_email">
						</md-input-container>
					</div>
					
					<div layout="row" layout-align="space-between start">
						<md-input-container flex="25">
							<label>Projeto</label>
							<md-select ng-model="grd.projeto" ng-change="onProjetoChange()" required>
							  <md-select-label>Selecione um Projeto do Cliente</md-select-label>
							  <md-option ng-value="projeto" ng-repeat="projeto in projetos">{{ projeto.nome }}</md-option>
							</md-select>
						</md-input-container>
						<md-input-container flex="25">
							<label>Código da GRD</label>
							<input type="text" ng-model="grd.codigo" required>
						</md-input-container>
						<md-input-container flex="50">
							<label>Observações</label>
							<input type="text" ng-model="grd.obs">
						</md-input-container>
					</div>
					<button type="submit" style="display: none"></button>
				</form>

				<div layout="row" layout-align="end center">
					<md-button ng-disabled="formDados.$pristine || formDados.$invalid" ng-click="salvar()" class="md-raised md-primary" aria-label="Salvar GRD">Salvar GRD</md-button>
				</div>
			</md-content>
		</md-tab>
		
		<md-tab label="Documentos"  ng-disabled="grd.id==0 || grd.id==undefined">
			<md-content class="documentos" layout="row">
				<div layout="column" flex="50">
					<div layout="row" layout-align="end center" class="controles_documentos">
						<span flex>
							<md-icon class="material-icons step" aria-label="description">search</md-icon>
							<input type="text" ng-model="qEsq.nome" placeholder="Buscar pelo nome...">	
						</span>
						<md-button class="md-fab md-accent md-mini" ng-click="selecionarTodosEsq()">
							<md-icon class="material-icons step" aria-label="description">done_all</md-icon>
							<md-tooltip md-direction="bottom">Selecionar Todos</md-tooltip>
						</md-button>
						<md-button class="md-fab md-accent md-mini" ng-click="addSelecionados()">
							<md-icon class="material-icons step" aria-label="description">playlist_add</md-icon>
							<md-tooltip md-direction="bottom">Adicionar Selecionados</md-tooltip>
						</md-button>
					</div>
					<div class="doc" layout="row" layout-align="start center" ng-repeat="doc in documentos|filter:qEsq|orderBy:'-progresso'" ng-class="{selecionado_dir:doc.chk_dir}">
						<div flex>
							<md-checkbox ng-model="doc.chk_esq" ng-disabled="doc.progresso!=100 || doc.added" class="md-accent" flex aria-label="{{doc.nome}}">
								{{doc.nome}}
							</md-checkbox>
						</div>
						
						<span class="controles_de_doc" flex="none">
							<span class="ptot">rev {{doc.rev_serial}}</span><span class="ptot">
								{{doc.progresso}}%
							</span>
							
							<md-button
								class="md-icon-button"
								aria-label="Ir para documento">
								<md-icon
									class="material-icons step"
									aria-label="Ir para documento"
									ng-click="goToDoc(doc.id)">open_in_new</md-icon>
									<md-tooltip md-direction="bottom">Ir para Página do Documento</md-tooltip>
							</md-button>

							<md-button
								class="md-icon-button"
								aria-label="Download"
								ng-click="baixarPda(doc.ultimo_pda)">
								<md-icon
									class="material-icons step"
									aria-label="Download">file_download</md-icon>
									<md-tooltip md-direction="bottom">Baixar Documento</md-tooltip>
							</md-button>

							<md-button
							 	class="md-icon-button"
							 	aria-label="Adicionar a GRD"
								ng-disabled="doc.progresso!=100 || doc.added"
								ng-click="addToGrd(doc)">
								<md-icon
									class="material-icons step"
									aria-label="Adicionar a GRD">playlist_add</md-icon>
								<md-tooltip md-direction="bottom">Adicionar a GRD</md-tooltip>
							</md-button>
						</span>
					</div>
				</div>
				<div layout="column" flex="50">
					<div layout="row" layout-align="end center" class="controles_documentos">
						<span flex>
							<md-icon class="material-icons step" aria-label="description">search</md-icon>
							<input type="text" ng-model="qDir.nome" placeholder="Buscar pelo nome...">	
						</span>
						<md-button class="md-fab md-primary md-mini" ng-click="removeSelecionados()">
							<md-icon class="material-icons step" aria-label="description">remove</md-icon>
							<md-tooltip md-direction="bottom">Remover Selecionados</md-tooltip>
						</md-button>
						<md-button class="md-fab md-primary md-mini" ng-click="selecionarTodosDir()">
							<md-icon class="material-icons step" aria-label="description">done_all</md-icon>
							<md-tooltip md-direction="bottom">Selecionar Todos</md-tooltip>
						</md-button>
						<md-button ng-disabled="grd.documentos_salvos" class="md-fab md-primary" ng-click="salvarDocumentos()">
							<md-icon class="material-icons step" aria-label="description">cloud_upload</md-icon>
							<md-tooltip class="my-diff-tooltip" md-direction="top" md-visible="!grd.documentos_salvos">Anexar Documentos a GRD</md-tooltip>
						</md-button>
					</div>
					<div class="doc" layout="row" layout-align="start center" ng-repeat="doc in documentos|filter:{added:true,nome:qDir.nome}|orderBy:'nome'">
						<md-checkbox  ng-model="doc.chk_dir" class="md-primary" flex aria-label="{{doc.nome}}">
							{{doc.nome}}
						</md-checkbox>
						<span class="controles_de_doc" flex="none">
							<span class="ptot" ng-click="openOpcoesDeDocumentoDialog($event,doc)">
								{{doc.nVias}} Via{{doc.nVias!=1?'s':''}}
							</span><span class="ptot" ng-click="openOpcoesDeDocumentoDialog($event,doc)">
								{{doc.nFolhas}} Fls
							</span><span class="ptot" ng-click="openOpcoesDeDocumentoDialog($event,doc)">
								{{doc.tipo.simbolo}}
								<md-tooltip md-direction="bottom">Tipo</md-tooltip>
							</span><span class="ptot" ng-click="openOpcoesDeDocumentoDialog($event,doc)">
								{{doc.codEMI.simbolo}}
								<md-tooltip md-direction="bottom">Código EMI</md-tooltip>
							</span>
							<md-button class="md-icon-button" aria-label="Remover da GRD" ng-click="removeFromGrd(doc)">
								<md-icon class="material-icons step" aria-label="Remover da GRD">remove_circle_outline</md-icon>
								<md-tooltip md-direction="bottom">Remover da GRD</md-tooltip>
							</md-button>
						</span>
					</div>
				</div>
			</md-content>
		</md-tab>
	</md-tabs>
</div>